# Jni

> 使用场景：
- java复用c/c++代码
- 自己实现一个java虚拟机
- 不同语言进行协同
- 虚拟机实现整合到c/c++程序中

## 第一章

java中jni是一个重要特性，使用它可以重用之前的代码。

### 1.1 java平台和系统环境

系统环境指本地操作系统，存在自己的本地库和cpu指令集。本地程序使用c/c++这样的本地语言编写，被编写只能在本地环境下运行的二进制代码，并和本地库链接在一起，一个系统编译出来的不可以在另一个系统运行。

### 1.2 角色

jni与本地交互：

- 使用jni实现本地方法，在java中调用他们。
- 允许将jvm嵌套到本地代码中
- 可以调用java语言写的模块

### 1.3 副作用

但是会失去两个优点：

- 不在跨平台  因为需要编译不同版本的库
- 程序不在安全


### 1.4 什么时候使用jni

一般最好尽量避免，因为他的副作用

不会造成影响的：
- java程序和本地程序使用TCP/IP或者IPC进行交互
- 使用java链接数据库，使用jdbc的Api
- 使用分布式技术，使用IDL

在不同的线程不会对java有影响。

下面是一些无法避免的：
- 使用java api


### jni演化

略
